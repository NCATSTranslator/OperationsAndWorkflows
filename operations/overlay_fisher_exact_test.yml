id: overlay_fisher_exact_test
subclass_of: overlay
name: Overlay Fisher exact test
description: Fisher exact test computes the Fisher's Exact Test p-values of the connection between a list of given nodes with specified query id (subject_qnode_key e.g. n01) to their adjacent nodes with specified query id (object_qnode_key e.g. n02) in the message knowledge graph. This information is then added as an edge attribute to a virtual edge which is then added to the query graph and knowledge graph. It can also allow you to filter out the user-defined insignificance of connections based on a specified p-value cutoff or return the top n smallest p-value of connections and only add their corresponding virtual edges to the knowledge graph.
examples: 
  - input: overlay/messages/11_input_fisher.json
    output: overlay/messages/12_output_fisher.json
    parameters:
      virtual_relation_label: j1
      intermediate_node_key: ""
      end_node_keys: ""
input_requirements: []
output_guarantees: []
allowed_changes:
  - add kedges
  - add qedges
  - add bindings to results

parameters:
  type: object
  properties:
    subject_qnode_key:
      description: A specific subject query node id.
      type: string
      example: n1
    object_qnode_key:
      description: A specific object query node id.
      type: string
      example: n2
    virtual_relation_label:
      description: An label to help identify the virtual edge.
      type: string
      example: F1
    rel_edge_key:
      description: A specific Qedge id connected to both subject nodes and object nodes in message KG (optional, otherwise all edges connected to both subject nodes and object nodes in message KG are considered).
      type: string
      example: e01
    filter_type:
      description: Optional way to filter results. If "top_n" is set this indicate the top number (the smallest) of p-values will be returned acording to what is specified in the "value" parameter. If "cutoff" is set then this indicates the p-value cutoff should be used to return results acording to what is specified in the "value" parameter. (optional, otherwise all results returned)
      type: string or None
      example: top_n, cutoff, None
      all_possible_input: top_n, cutoff, None
    value:
      description: if "top_n" is set for "filter_type" this is an int indicating the top number (the smallest) of p-values to return. If instead "cutoff" is set then this is a float indicating the p-value cutoff to return the results. (optional, otherwise all results returned)
      type: int or float or None
      example: all, 0.05, 0.95, 50
  required:
    - subject_qnode_key
    - object_qnode_key
    - virtual_relation_label

