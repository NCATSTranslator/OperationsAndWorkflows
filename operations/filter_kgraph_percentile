id: filter_kgraph_percentile
subclass_of: filter_kgraph
name: filter kgraph (percentile)
description: This operation removes kgraph edges that have attribute values are below/above the given percentile.
examples:
- input: fill_and_filter/messages/05_filtered_kgraph_stat_input.json
  output: fill_and_filter/messages/06_filtered_kgraph_std_dev_output.json
  parameters:
    edge_attribute: normalized_google_distance 
    threshold: 77.5
    remove_above: false
    remove_connected_nodes: true
    qnode_key: drug
input_requirements: []
output_guarantees:
- no edges in the kgraph which have attribute values are below/above the given percentile.
allowed_changes:
- remove knodes
- remove kedges
parameters:
  type: object
  properties:
    edge_attribute:
      description: The name of the edge attribute to filter on.
      type: string
      example: normalized_google_distance
    threshold:
      description: The percentile to threshold on.
      type: float
      example: 96.8
      minimum: 0
      maximum: 100
      default: 95
    remove_above:
      description: Indictes whether to remove above or below the given threshold.
      type: bool
      example: true
      default: false
    remove_connected_nodes:
      description: Indicates whether or not to remove the nodes connected to the edges.
      type: bool
      example: true
      default: false
    qnode_key:
      description: If remove_connected_nodes is set to True this indicates if you only want nodes corresponding to a specific qnode_key to be removed. If not provided the qnode_key will not be considered when filtering.
      type: string
      example: n01
      default: null
  required:
  - edge_attribute
